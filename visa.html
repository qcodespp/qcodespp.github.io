<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Connecting to actual instruments &#8212; qcodes++ 0.1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="_static/nature.css?v=8fc2db88" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js?v=2389946f"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=4825356b"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Data loading and analysis" href="data_analysis.html" />
    <link rel="prev" title="More about Parameters" href="parameters.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="data_analysis.html" title="Data loading and analysis"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="parameters.html" title="More about Parameters"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">qcodes++ 0.1.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Connecting to actual instruments</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="connecting-to-actual-instruments">
<h1>Connecting to actual instruments<a class="headerlink" href="#connecting-to-actual-instruments" title="Permalink to this heading">¶</a></h1>
<p>The vast majority of scientific instruments communicate via the VISA protocol, whether it’s over GPIB, USB, RS232, or Ethernet. Assuming you’ve installed a National Instruments or Keysight backend to handle VISA, qcodes++ deals with connecting to VISA instruments in a very uniform way. To find out which VISA instruments are attached to your computer, use:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">qcodespp</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">qc</span>
<span class="n">qc</span><span class="o">.</span><span class="n">listVISAinstruments</span><span class="p">()</span>
</pre></div>
</div>
<p>The output should look something like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Instrument</span> <span class="n">IDN</span><span class="p">:</span> <span class="n">KEITHLEY</span> <span class="n">INSTRUMENTS</span><span class="p">,</span><span class="n">MODEL</span> <span class="mi">2450</span><span class="p">,</span><span class="mi">04613345</span><span class="p">,</span><span class="mf">1.7.12</span><span class="n">b</span>
<span class="n">VISA</span> <span class="n">Address</span><span class="p">:</span> <span class="n">TCPIP0</span><span class="p">::</span><span class="mf">169.254.100.202</span><span class="p">::</span><span class="n">inst0</span><span class="p">::</span><span class="n">INSTR</span>

<span class="n">Instrument</span> <span class="n">IDN</span><span class="p">:</span> <span class="n">KEITHLEY</span> <span class="n">INSTRUMENTS</span><span class="p">,</span><span class="n">MODEL</span> <span class="mi">2450</span><span class="p">,</span><span class="mi">02613340</span><span class="p">,</span><span class="mf">1.7.12</span><span class="n">b</span>
<span class="n">VISA</span> <span class="n">Address</span><span class="p">:</span> <span class="n">GPIB0</span><span class="p">::</span><span class="mi">12</span><span class="p">::</span><span class="n">INSTR</span>

<span class="n">Instrument</span> <span class="n">IDN</span><span class="p">:</span> <span class="n">QDevil</span><span class="p">,</span> <span class="n">QDAC</span><span class="o">-</span><span class="n">II</span><span class="p">,</span> <span class="mi">159</span><span class="p">,</span> <span class="mi">13</span><span class="o">-</span><span class="mf">1.57</span>
<span class="n">VISA</span> <span class="n">Address</span><span class="p">:</span> <span class="n">ASRL9</span><span class="p">::</span><span class="n">INSTR</span>
</pre></div>
</div>
<p>There are three instruments attached to the computer: two Keithley 2450 Source Meters, one over TCP/IP and one over GPIB, and a QDevil QDAC-II over USB/serial (ASRL). To connect to these instruments in our notebook, we first, import the relevant drivers, then create instrument objects from the drivers, using the addresses printed by <code class="docutils literal notranslate"><span class="pre">listVISAinstruments()</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">qcodespp.instrument_drivers.QDevil.QDAC2</span><span class="w"> </span><span class="kn">import</span> <span class="n">QDac2</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">qcodespp.instrument_drivers.tektronix.Keithley_2450</span><span class="w"> </span><span class="kn">import</span> <span class="n">Keithley_2450</span>

<span class="n">k1</span> <span class="o">=</span> <span class="n">Keithley_2450</span><span class="p">(</span><span class="s1">&#39;k1&#39;</span><span class="p">,</span><span class="s1">&#39;TCPIP0::169.254.100.202::inst0::INSTR&#39;</span><span class="p">)</span>
<span class="n">k2</span> <span class="o">=</span> <span class="n">Keithley_2450</span><span class="p">(</span><span class="s1">&#39;k2&#39;</span><span class="p">,</span><span class="s1">&#39;GPIB0::16::INSTR&#39;</span><span class="p">)</span>
<span class="n">qdac</span> <span class="o">=</span> <span class="n">QDac2</span><span class="p">(</span><span class="s1">&#39;qdac&#39;</span><span class="p">,</span><span class="s1">&#39;ASRL9::INSTR&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The process is the same no matter the instrument, or connection type, as long as it’s a VISA instrument. There are some instruments that don’t use VISA. Naturally, they will not show up when using <code class="docutils literal notranslate"><span class="pre">listVISAinstruments()</span></code>, and may require a different syntax to connect to them. Check out the relevant documentation or source code.</p>
<section id="where-are-the-drivers">
<h2>Where are the drivers?<a class="headerlink" href="#where-are-the-drivers" title="Permalink to this heading">¶</a></h2>
<p>There are three possible sources for pre-existing instrument drivers; qcodes++, <a class="reference external" href="https://microsoft.github.io/Qcodes/drivers_api/index.html">QCoDeS</a> and <a class="reference external" href="https://qcodes.github.io/Qcodes_contrib_drivers/index.html">qcodes_contrib_drivers</a>. Look through the instruments available at those links to find the one you’re looking for. If you don’t have the qcodes_contrib_drivers package installed, you can install it with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">qcodes_contrib_drivers</span>
</pre></div>
</div>
<p>Then import the driver you need:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">qcodespp.instrument_drivers.QDevil.QDAC2</span><span class="w"> </span><span class="kn">import</span> <span class="n">QDac2</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">qcodes.instrument_drivers.Keithley</span><span class="w"> </span><span class="kn">import</span> <span class="n">Keithley2400</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">qcodes_contrib_drivers.drivers.Tektronix.AWG520</span><span class="w"> </span><span class="kn">import</span> <span class="n">Tektronix_AWG520</span>
</pre></div>
</div>
<p>All these drivers will work perfectly fine with qcodes++ despite coming from different sources.</p>
</section>
<section id="how-do-i-know-which-features-an-instrument-has">
<h2>How do I know which features an instrument has?<a class="headerlink" href="#how-do-i-know-which-features-an-instrument-has" title="Permalink to this heading">¶</a></h2>
<p>There are many ways! If you kind of know what you’re looking for, hit the tab key after typing the instrument name, e.g. <code class="docutils literal notranslate"><span class="pre">k2600.</span></code> and it will show you all the available functions of the instrument. Many of those functions will either be Parameters or Submodules. Submodules are typically used to represent the channels of an instrument. For example, the Keithley 2600 Source Meters have two channels. In the qcodes driver, these are named <code class="docutils literal notranslate"><span class="pre">smua</span></code> and <code class="docutils literal notranslate"><span class="pre">smub</span></code>. Each of these submodules have various parameters, including <code class="docutils literal notranslate"><span class="pre">volt</span></code>, <code class="docutils literal notranslate"><span class="pre">curr</span></code>, etc. Therefore reading the voltage on Channel A is done with <code class="docutils literal notranslate"><span class="pre">k2600.smua.volt()</span></code></p>
<p>You can list the Parameters of the instrument by running:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">instrument</span><span class="o">.</span><span class="n">parameters</span>
</pre></div>
</div>
<p>and the SubModules by running:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">instrument</span><span class="o">.</span><span class="n">submodules</span>
</pre></div>
</div>
<p>and of course the Parameters of any submodule by:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">instrument</span><span class="o">.</span><span class="n">channel01</span><span class="o">.</span><span class="n">parameters</span>
</pre></div>
</div>
<p>To get the entire ‘picture’ of the current state of the instrument, you can use the <code class="docutils literal notranslate"><span class="pre">instrument.snapshot()</span></code> function.</p>
<p>However, eventually you will be better off either reading the API for the driver or the source code, likely in combination with the instrument’s manual. It’s painful, I know, but it’s still better than writing your own driver ;)</p>
</section>
<section id="writing-your-own-driver">
<h2>Writing your own driver<a class="headerlink" href="#writing-your-own-driver" title="Permalink to this heading">¶</a></h2>
<p>If you can’t find a driver for your instrument from any of the above sources, you will need to write your own, following the instructions at <a class="reference external" href="https://qcodes.github.io/Qcodes_contrib_drivers/index.html">qcodes_contrib_drivers</a>.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Connecting to actual instruments</a><ul>
<li><a class="reference internal" href="#where-are-the-drivers">Where are the drivers?</a></li>
<li><a class="reference internal" href="#how-do-i-know-which-features-an-instrument-has">How do I know which features an instrument has?</a></li>
<li><a class="reference internal" href="#writing-your-own-driver">Writing your own driver</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="parameters.html"
                          title="previous chapter">More about Parameters</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="data_analysis.html"
                          title="next chapter">Data loading and analysis</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/visa.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="data_analysis.html" title="Data loading and analysis"
             >next</a> |</li>
        <li class="right" >
          <a href="parameters.html" title="More about Parameters"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">qcodes++ 0.1.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Connecting to actual instruments</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2025, qcodes++.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.1.2.
    </div>
  </body>
</html>