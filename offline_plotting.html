

<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Offline plotting, a.k.a. InSpectra Gadget &mdash; qcodes++ 0.1.5 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
    <link rel="shortcut icon" href="_static/qcppfavicon.svg"/>
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js?v=7b800ad1"></script>
      <script src="_static/doctools.js?v=888ff710"></script>
      <script src="_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="The Measure class" href="measure.html" />
    <link rel="prev" title="Data loading and analysis" href="data_analysis.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            qcodes++
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="background.html">Background</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="dummy_measurements.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="more_features.html">Commonly used features</a></li>
<li class="toctree-l1"><a class="reference internal" href="parameters.html">Parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="visa.html">Instruments</a></li>
<li class="toctree-l1"><a class="reference internal" href="live_plot.html">Live plotting</a></li>
<li class="toctree-l1"><a class="reference internal" href="template.html">Example template</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_analysis.html">Data loading and analysis</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Offline plotting, a.k.a. InSpectra Gadget</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#basic-plotting">Basic plotting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#plot-types">Plot types</a></li>
<li class="toctree-l3"><a class="reference internal" href="#fitting">Fitting</a></li>
<li class="toctree-l3"><a class="reference internal" href="#filters">Filters</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#linecuts">Linecuts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#fitting-linecuts">Fitting linecuts</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#working-with-multiple-files">Working with multiple files</a></li>
<li class="toctree-l2"><a class="reference internal" href="#working-with-an-entire-folder">Working with an entire folder</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#combining-datasets-plots">Combining datasets/plots</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#saving-and-loading">Saving and loading</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#exporting-data-and-filters">Exporting data and filters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#saving-and-loading-appearance-presets">Saving and loading appearance presets</a></li>
<li class="toctree-l3"><a class="reference internal" href="#loading-non-qcodes-data">Loading non-qcodes++ data.</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#background">Background</a></li>
<li class="toctree-l2"><a class="reference internal" href="#a-note-about-fitting">A note about fitting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="measure.html">The Measure class</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced.html">Advanced use of Loop</a></li>
<li class="toctree-l1"><a class="reference internal" href="differences_from_qcodes.html">Comparing qcodes++ and QCoDeS</a></li>
<li class="toctree-l1"><a class="reference internal" href="autoapi/index.html">API Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">qcodes++</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Offline plotting, a.k.a. InSpectra Gadget</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/offline_plotting.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="offline-plotting-a-k-a-inspectra-gadget">
<h1>Offline plotting, a.k.a. InSpectra Gadget<a class="headerlink" href="#offline-plotting-a-k-a-inspectra-gadget" title="Permalink to this heading"></a></h1>
<figure class="align-default">
<img alt="InSpectra Gadget main window" src="_images/IGmain.png" />
</figure>
<p>Offline plotting can be opened from the Anaconda prompt with
<code class="docutils literal notranslate"><span class="pre">qcodespp</span> <span class="pre">offline_plotting</span></code></p>
<p>or from Jupyter notebooks with
<code class="docutils literal notranslate"><span class="pre">qcodespp.offline_plotting()</span></code></p>
<p>If you have declared <code class="docutils literal notranslate"><span class="pre">qcodespp.set_data_folder('foldername')</span></code> in the same notebook, data from that folder will automatically be opened. Alternatively, you can write <code class="docutils literal notranslate"><span class="pre">qcodespp.offline_plotting(folder=path_to_folder)</span></code> to open a different folder. Otherwise, the initial state is blank.</p>
<section id="basic-plotting">
<h2>Basic plotting<a class="headerlink" href="#basic-plotting" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Load data by clicking ‘Open File’, or by <a class="reference external" href="https://qcodespp.github.io/offline_plotting.html#working-with-an-entire-folder">opening/linking a folder</a>.</p></li>
<li><p>1D data is plotted as lines, and 2D data as a <a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.pcolormesh.html">color plot</a>.</p></li>
<li><p>To change the plotted parameters, right click on the parameter name under ‘Settings for Selected File’ (for 2D data) or ‘1D traces’ (for 1D data).</p></li>
<li><p>Immediately above the plot windows are the usual matplotlib tools for panning and zooming. Reset the view with the ‘home’ button.</p></li>
<li><p>You can also zoom using the mousewheel. Zooming while holding ctrl(shift) zooms only on the x(y) axis.</p></li>
<li><p>‘Settings for Selected File’ changes the plot appearance. Right click to choose from preset values.</p></li>
<li><p>Axes settings (inc. for the colorbar) are underneath the plots.</p></li>
<li><p>The colorbar is accompanied by a histogram. To adjust the range of the colorbar, change the limits of the blue shaded region by clicking and dragging.</p></li>
<li><p>For 1D data, extra options will appear when the file name is clicked. You can add multiple lines from the same dataset to the same plot.</p></li>
<li><p>Linestyle and colour can also be changed by rightclicking.</p></li>
<li><p>Basic uncertainty plotting is supported for 1D data. For fixed values, enter the value, and for a percentage error enter e.g. ‘10%’. The uncertainties can also be loaded from another column in the dataset by right-clicking on the relevant cell in the table. (see below for how filters (do not) affect uncertainties).</p></li>
<li><p>A legend can be added for 1D data using the checkbox above the plot window.</p></li>
<li><p>You can also perform <a class="reference external" href="https://qcodespp.github.io/offline_plotting.html#fitting">fits to 1D data</a>.</p></li>
<li><p>You can save or copy the plot using the buttons in the top right corner or the shortcuts Ctrl+Shift+S, Ctrl+Shift+C. The saved pdfs work very well in Adobe Illustrator.</p></li>
</ul>
<section id="plot-types">
<h3>Plot types<a class="headerlink" href="#plot-types" title="Permalink to this heading"></a></h3>
<p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.histogram.html">Histograms</a> and <a class="reference external" href="ahref=https://numpy.org/doc/stable/reference/generated/numpy.fft.rfft.htm">Fast Fourier Transforms (FFTs)</a> of the data can be plotted by selecting the appropriate ‘Plot type’ at the top of the window.</p>
<ul class="simple">
<li><p>For histograms, you can choose the number of bins either next to the ‘plot type’ menu (for 2D data) or line-by-line in the Traces table (for 1D data).</p></li>
<li><p>FFTs are plotted against the <a class="reference external" href="ahref=https://numpy.org/doc/stable/reference/generated/numpy.fft.fftfreq.html">calculated frequencies</a>. For this to be meaningful, the original data must be on an evenly-sampled grid. At current, you will have to interpolate your data to resample it onto an evenly-spaced grid. This may become automatic in future.</p></li>
</ul>
</section>
<section id="fitting">
<h3>Fitting<a class="headerlink" href="#fitting" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>The fitting is basically a GUI for <a class="reference external" href="ahref=https://lmfit.github.io/lmfit-py/">lmfit</a>, with almost all built-in models implemented. See <a class="reference external" href="ahref=https://lmfit.github.io/lmfit-py/builtin_models.html">here for a description of each model/function</a>.</p></li>
<li><p>To limit the fitting range, fill out the Xmin and Xmax fields, OR, click twice on the plot area. Lower limit first, upper limit second. Further clicks will move the closest limit to the click position.</p></li>
<li><p>You almost always need to provide some ‘Input info’; might be the polynomial order, or the number of peaks to fit. The info is given in the box at the bottom of the window.</p></li>
<li><p>Optionally, you can provide an initial guess for the fit parameters; see the info box for how to format your inputs correctly. <a class="reference external" href="https://qcodespp.github.io/offline_plotting.html#a-note-about-fitting">The initial guess can be very important</a>.</p></li>
<li><p>If there is not a model suited to your needs, use ‘User input’/’Expression’. <a class="reference external" href="ahref=https://lmfit.github.io/lmfit-py/builtin_models.html#lmfit.models.ExpressionModel">You can input anything you want and fit it!</a></p></li>
<li><p>The ‘custom’ models include some fits relevant for electron transport, using <code class="docutils literal notranslate"><span class="pre">lmfit.Model</span></code> <a class="reference external" href="https://lmfit.github.io/lmfit-py/model.html">(docs)</a>. If you have a working <code class="docutils literal notranslate"><span class="pre">Model</span></code> for a function not included here, feel free to <a class="reference external" href="https://github.com/qcodespp/qcodespp">contact me via github or email</a> (or even better, make a pull request!) and I will include it.</p></li>
<li><p>‘Save fit result’ saves the fit result using <code class="docutils literal notranslate"><span class="pre">lmfit.model.save_modelresult</span></code> <a class="reference external" href="https://lmfit.github.io/lmfit-py/model.html#lmfit.model.save_modelresult">(docs)</a>. You can use <code class="docutils literal notranslate"><span class="pre">lmfit.model.load_modelresult('file_location')</span></code> <a class="reference external" href="https://lmfit.github.io/lmfit-py/model.html#lmfit.model.load_modelresult">(docs)</a> to load the fit result into a notebook for further analysis.</p></li>
<li><p>You can fit all of the checked lines using the same fitting options using the ‘Fit checked’ button. You can save all the results as lmfit model results (I suggest making a new folder before saving!!).</p></li>
<li><p>Finally, you can also calculate statistics under ‘fitting’. This isn’t really fitting of course, it just calculates the listed values using the relevant numpy function (i.e. no lmfit involved). The statistics are saved as a .json file.</p></li>
</ul>
</section>
<section id="filters">
<h3>Filters<a class="headerlink" href="#filters" title="Permalink to this heading"></a></h3>
<p>‘Filters’ in InSpectra Gadget are simply mathematical operations that can be performed on the data. The filters thus handle everything from applying offsets to any of the axes, to doing numerical differentiation.</p>
<ul class="simple">
<li><p>You can add multiple instances of the same filter type, change the order they are applied in and turn them off and on.</p></li>
<li><p>You can export the data if you need to work with the results in another program/notebook.</p></li>
<li><p>You can also <a class="reference external" href="https://qcodespp.github.io/offline_plotting.html#exporting-data-and-filters">export the filters/settings</a>, and load them later on other datasets.</p></li>
<li><p>Finally, and importantly, you can ‘send’ the filtered data to the current dataset, to plot it on another axis, or simply use it later.</p></li>
</ul>
<p>Each available filter has up to two options (hover over the relevant box in the app to see what they are):</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Filter type</p></th>
<th class="head"><p>Option 1</p></th>
<th class="head"><p>Option 2</p></th>
<th class="head"><p>Info</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.gradient.html">Derivative</a></p></td>
<td><p>Order in x</p></td>
<td><p>Order in y</p></td>
<td><p>n-th derivative in x and/or y</p></td>
</tr>
<tr class="row-odd"><td><p>Integrate</p></td>
<td><p>Order in x</p></td>
<td><p>Order in y</p></td>
<td><p>Numerically integrate the z data (for 2D) or y data (for 1D) n times along the x or y axis. Choice between the trapezoidal rule, Simpson’s rule and a rectangular approximation.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://numpy.org/doc/2.2/reference/generated/numpy.cumsum.html">Cumulative sum</a></p></td>
<td><p>Order in x</p></td>
<td><p>Order in y</p></td>
<td><p>Perform the cumulative sum n times along the array axis. Similar to integrating if the grid is regular.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://docs.scipy.org/doc/scipy-1.15.2/reference/generated/scipy.ndimage.gaussian_filter.html">Smoothen</a></p></td>
<td><p>window in x</p></td>
<td><p>window in y</p></td>
<td><p><a class="reference external" href="https://docs.scipy.org/doc/scipy-1.15.2/reference/generated/scipy.ndimage.gaussian_filter.html">Gaussian</a> or <a class="reference external" href="https://docs.scipy.org/doc/scipy-1.15.2/reference/generated/scipy.ndimage.median_filter.html#scipy.ndimage.median_filter">median</a> filtering</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.signal.savgol_filter.html">Savitzy-Golay</a></p></td>
<td><p>window</p></td>
<td><p>polynomial order</p></td>
<td><p>Savitzy-Golay smoothing/filtering applied along the selected axis</p></td>
</tr>
<tr class="row-odd"><td><p>Add/Subtract</p></td>
<td><p>value</p></td>
<td><p>n/a</p></td>
<td><p>Add/subtract a fixed value to any axis. Also available by right-clicking on plot area as ‘Offset &lt;axis&gt; by X’. To add/subtract another parameter from the same dataset, right click on the offset value. To subtract, place a ‘-’ in front of the parameter name.</p></td>
</tr>
<tr class="row-even"><td><p>Multiply</p></td>
<td><p>factor</p></td>
<td><p>n/a</p></td>
<td><p>X*factor; useful to convert e.g. V to mV. To multiply by another parameter from the same dataset, right click on the value to choose.</p></td>
</tr>
<tr class="row-odd"><td><p>Divide</p></td>
<td><p>factor</p></td>
<td><p>n/a</p></td>
<td><p>X/factor. To divide by another parameter from the same dataset, right click on the value to choose.</p></td>
</tr>
<tr class="row-even"><td><p>Add slope</p></td>
<td><p>slope in x</p></td>
<td><p>slope in y</p></td>
<td><p>Slope is multiplied to x and/or y. Useful to e.g. subtract series resistance</p></td>
</tr>
<tr class="row-odd"><td><p>Invert</p></td>
<td><p>n/a</p></td>
<td><p>n/a</p></td>
<td><p>perform 1/x, 1/y or 1/z</p></td>
</tr>
<tr class="row-even"><td><p>Normalize</p></td>
<td><p>x-coordinate</p></td>
<td><p>y-coordinate</p></td>
<td><p>Normalise z-data (or y-data if 1D) to min, max, or specified point</p></td>
</tr>
<tr class="row-odd"><td><p>Subtract average</p></td>
<td><p>n/a</p></td>
<td><p>n/a</p></td>
<td><p>Subtract average of data from data</p></td>
</tr>
<tr class="row-even"><td><p>Offset line by line</p></td>
<td><p>index</p></td>
<td><p>n/a</p></td>
<td><p>For each line in a 2D dataset, subtract the value at the given index, within that line. Used if you know that the n-th index of each line should be zero.</p></td>
</tr>
<tr class="row-odd"><td><p>Sub. ave. line by line</p></td>
<td><p>n/a</p></td>
<td><p>n/a</p></td>
<td><p>For each line in a 2D dataset, subtract the average of values in that line.</p></td>
</tr>
<tr class="row-even"><td><p>Subtract trace</p></td>
<td><p>index</p></td>
<td><p>n/a</p></td>
<td><p>2D data only. Subtract the linetrace at the given index from all other lines in the data.</p></td>
</tr>
<tr class="row-odd"><td><p>Logarithm</p></td>
<td><p>base</p></td>
<td><p>n/a</p></td>
<td><p>logarithm to base 10, 2 or e (default 10). The Mask, Offset and Abs options deals with negative values. ‘Mask’ ignores them, ‘Offset’ offsets all data by the minimum value in the data, and ‘Abs’ takes the absolute value of the data. Only for z data; for x,y use axis scaling below plot window</p></td>
</tr>
<tr class="row-even"><td><p>Power</p></td>
<td><p>exponent</p></td>
<td><p>n/a</p></td>
<td><p>performs x^exponent</p></td>
</tr>
<tr class="row-odd"><td><p>Root</p></td>
<td><p>root exponent</p></td>
<td><p>n/a</p></td>
<td><p>performs abs(x)^(1/exponent) if exponent&gt;0</p></td>
</tr>
<tr class="row-even"><td><p>Absolute</p></td>
<td><p>n/a</p></td>
<td><p>n/a</p></td>
<td><p>Absolute value of data</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://numpy.org/doc/2.2/reference/generated/numpy.flip.html">Flip</a></p></td>
<td><p>n/a</p></td>
<td><p>n/a</p></td>
<td><p>Flips the data along the x-axis (1D) or y-axis (2D)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/interpolate.html">Interpolate</a></p></td>
<td><p># of points in x</p></td>
<td><p># of points in y</p></td>
<td><p>Interpolate onto a regular grid with the given number of points. 1D uses <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.make_interp_spline.html">scipy.interpolate.make_interp_spline</a>, 2D uses <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.griddata.html">scipy.interpolate.griddata</a>.</p></td>
</tr>
<tr class="row-odd"><td><p>Sort</p></td>
<td><p>n/a</p></td>
<td><p>n/a</p></td>
<td><p>Rearranges the data such that X or Y is sorted in ascending order.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://numpy.org/doc/2.2/reference/generated/numpy.roll.html">Roll X</a></p></td>
<td><p>position</p></td>
<td><p>amount</p></td>
<td><p>Rolls the data in x by the given amount, starting at the given position</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://numpy.org/doc/2.2/reference/generated/numpy.roll.html">Roll Y</a></p></td>
<td><p>position</p></td>
<td><p>amount</p></td>
<td><p>Rolls the data in y by the given amount, starting at the given position</p></td>
</tr>
<tr class="row-even"><td><p>Crop X</p></td>
<td><p>minimum x</p></td>
<td><p>maximum x</p></td>
<td><p>Not just zooming; relevant if e.g. you want to apply a filter only to a section of the data. Available also by right-clicking on the plot window</p></td>
</tr>
<tr class="row-odd"><td><p>Crop Y</p></td>
<td><p>minimum y</p></td>
<td><p>maximum y</p></td>
<td><p>(2D data only) As above</p></td>
</tr>
<tr class="row-even"><td><p>Cut X</p></td>
<td><p>left</p></td>
<td><p>width</p></td>
<td><p>Similar to Crop, but uses array index, and uses min and width rather than min and max.</p></td>
</tr>
<tr class="row-odd"><td><p>Cut Y</p></td>
<td><p>bottom</p></td>
<td><p>width</p></td>
<td><p>Similar to Crop, but uses array index, and uses min and width rather than min and max.</p></td>
</tr>
<tr class="row-even"><td><p>Swap X/Y</p></td>
<td><p>n/a</p></td>
<td><p>n/a</p></td>
<td><p>Swaps the x and y axes of the data, i.e. plots y as a function of x and vice versa</p></td>
</tr>
</tbody>
</table>
<p><strong>Filters and uncertainties</strong></p>
<p>Since it is extremely non-obvious how various filters may affect uncertainties in different situations, only scalar multiplication and division filters are applied to uncertainties (basically to facilitate unit scaling, e.g. from volt to millivolt). In general, if you are performing any of the above operations, you should re-calculate your uncertainties manually.</p>
<p><strong>Filters and irregular or non-monotonic x/y</strong></p>
<p>Even though it’s possible to plot irregular and non-monotonic x/y/z data (as long as the arrays are of the correct shape), the way that filters are applied often assume at least monotonic x and y. For example, Crop X and Crop Y are based on the <em>array indices</em> not the absolute value on the x or y axis. Similarly, the integral is only calculated correctly if X (or Y) are regular. Conversely, the derivative <em>is</em> calculated correctly for irregular X (or Y). If you apply a filter to irregular data, it is worth to peek into the code to see what the filter is actually doing. As time goes on we will try to make the filters more friendly to irregular data.</p>
</section>
</section>
<section id="linecuts">
<h2>Linecuts<a class="headerlink" href="#linecuts" title="Permalink to this heading"></a></h2>
<figure class="align-default">
<img alt="InSpectra Gadget linecut window" src="_images/IGlinecuts.png" />
</figure>
<ul class="simple">
<li><p>To make a horizontal(vertical) linecut, left-click(middle-click) at the desired location on the plot.</p></li>
<li><p>Alternatively, right click on the plot area and choose from the menu; diagonal linecuts are also available.</p></li>
<li><p>You can change the index at which the cut is made, the offset on the y-axis, and the colour of the line.</p></li>
<li><p>You can add further cuts by clicking again, or manually adding them in the linecut window.</p></li>
<li><p>To generate a series of linecuts, specify (the indices) start, end, step and y-axis offset. Use -1 as end index to call the last index. It’s probably not a smart idea to plot every line if you have hundreds of lines; it will use a lot of memory and won’t look good anyway.</p></li>
<li><p>Once you have your linecuts, you can also apply a colourmap to their linecolors by selecting which colormap to use, how to apply it, and clicking ‘Apply’</p></li>
<li><p>You can (re-)access the linecut windows from the ‘Plot Actions’ menu, by right-clicking on the plot area, or by the shortcuts Ctrl+Shift+H, Ctrl+Shift+G, Ctrl+Shift+D for horizontal, vertical, and diagonal linecuts, respectively.</p></li>
<li><p>You can copy and paste linecuts (‘Plot Actions’ menu or Alt+C, Alt+V); horizontal and vertical linecuts are copy/pasted according to their <em>index</em>, while diagonal linecuts are copy/pasted according to their two data co-ordinates.</p></li>
</ul>
<section id="fitting-linecuts">
<h3>Fitting linecuts<a class="headerlink" href="#fitting-linecuts" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Fitting linecuts is almost the same as in the 1D plotting case except…</p></li>
<li><p>You can ‘Generate a parameter dependency’; i.e. create a file which has the value of the parent axis as one column, and all fit parameters as the other columns. The file is automatically added to the file list in the main window. You can then plot each fit parameter as a function of the parent axis’ variable.</p></li>
</ul>
</section>
</section>
<section id="working-with-multiple-files">
<h2>Working with multiple files<a class="headerlink" href="#working-with-multiple-files" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>To open another data file, just click ‘Open File’ again. Data from the new file will be plotted.</p></li>
<li><p>To see data from both files side-by-side, activate the checkbox next to the original file. You now have two plots!</p></li>
<li><p>To change the spacing between the plots and the whitespace above and below, use the middle mouse scrolling when hovering over the relevant region.</p></li>
<li><p>IMPORTANT: To set values such as labels, z tick parameters, axis ranges, first either click on the filename corresponding to the plot you want to edit (not the checkbox) or somewhere on the plot area, to bring the correct file/plot/data into focus.</p></li>
<li><p>To change the order of the plots, you change the order of the files in the list using ‘move up’ and ‘move down’.</p></li>
<li><p>To add a new plot with different sets of parameters from the <em>same</em> dataset, use the X,Y,(Z) boxes above the plot window and click ‘Add new plot’. This duplicates the file in the file list. You can do this manually by right-clicking on the file and choosing ‘Duplicate’, or with Ctrl+D.</p></li>
<li><p>Duplicating a file will <em>not</em> carry over any linecuts or fits. It is quite hard to implement. If it <em>really</em> becomes relevant I can look into it.</p></li>
</ul>
</section>
<section id="working-with-an-entire-folder">
<h2>Working with an entire folder<a class="headerlink" href="#working-with-an-entire-folder" title="Permalink to this heading"></a></h2>
<p>You can open data from an entire folder in two ways.</p>
<ul class="simple">
<li><p>You can select ‘Open Folder’ and choose the relevant folder. This will load the list of all the datasets found in that folder <em>and all sub-folders</em>. The data itself will not be loaded until you click the checkbox to plot it. This is because the data gets loaded into memory, which <em>might</em> start to affect your computer’s performance. However, unchecking a file does <em>not</em> free up memory. ‘Remove file’ and ‘Clear list’ <em>should</em> do it, but this is hard to troubleshoot. Certainly refreshing the kernel works.</p></li>
<li><p>You can also ‘link’ to a folder with ongoing measurements by clicking ‘Link Folder’. Initially this will perform the same action as ‘Open Folder’, but now when you click ‘Refresh’, any new data will be added automatically to the list of Opened Files. (If you enable ‘Track data’ for the linked folder, on-going measurements will be tracked, with an update period of 30s. However, it’s really not recommended because the data has to be read from disk, which can be disruptive, and will inevitably eat up all your memory. It is much better to rely on <code class="docutils literal notranslate"><span class="pre">qcodespp.live_plot()</span></code> for live plotting, which goes to great pains to avoid these pitfalls.)</p></li>
</ul>
<section id="combining-datasets-plots">
<h3>Combining datasets/plots<a class="headerlink" href="#combining-datasets-plots" title="Permalink to this heading"></a></h3>
<p>There are three ways to combine datasets:</p>
<ul class="simple">
<li><p>1D data: an arbitrary number of datasets can be combined; all parameters from all datasets are available for plotting. It will not be possible to plot parameters from different datasets against each other unless the arrays have the same length.</p></li>
<li><p>2D data: an arbitrary number of datasets can be stacked along the x-axis. The number of parameters and their names must be the same, and the y-axis dimension must be the same for all datasets. Any other situation would require interpolating along the y-axis; you should do this manually and then load the file (see below for how to prepare non-qcodes++ data)</p></li>
<li><p>One 2D dataset and one 1D dataset: Makes it possible to plot lines/points ontop of the 2D dataset. No restriction on dimensions, but only supports one dataset of each type. If you need to add more than one dataset of a particular type, first combine those using one of the previous two options.</p></li>
</ul>
<p>The combined datasets are by default not saved to disk! Remember to either save your work or export the data. Similarly to duplicated data, linecuts, fits and (for 1D datasets) the properties of the 1D traces are not carried into the combined data.</p>
<figure class="align-default" id="id1">
<img alt="InSpectra Gadget combined dataset" src="_images/IGcombined.png" />
<figcaption>
<p><span class="caption-text">A combined 1D and 2D dataset. To produce this plot, the peaks in the previous image were fitted to seven Lorentzians at each temperature. The parameter dependency was generated, and after combining this with the original 2D dataset, the peak centers were plotted ontop of the 2D data.</span><a class="headerlink" href="#id1" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
</section>
<section id="saving-and-loading">
<h2>Saving and loading<a class="headerlink" href="#saving-and-loading" title="Permalink to this heading"></a></h2>
<p>You can ‘Save Session’ and ‘Restore Session’ in the ‘.igs’ format from the ‘File’ menu. The raw data is <em>not</em> saved, rather the filepath is saved, and the data reloaded upon Restore. If the filepath changes (e.g. you moved the data, or are loading the session on a different computer), you will be prompted to find the new data location. The program will then try to load <em>all</em> the data by looking at the new relative filepath, so even if you have 1000 files, you should only have to manually relocate one of them.</p>
<section id="exporting-data-and-filters">
<h3>Exporting data and filters<a class="headerlink" href="#exporting-data-and-filters" title="Permalink to this heading"></a></h3>
<p>If you need to do further analysis in another program/notebook, export the data using the ‘Export processed data’ menu. You can save in .dat, .csv or .json format. For python, .json is likely the best choice, because it does not have the limitations of numpy .dat files, and is easily loaded as a <a class="reference external" href="https://docs.python.org/3/tutorial/datastructures.html#dictionaries">python</a> <a class="reference external" href="https://www.w3schools.com/python/python_dictionaries.asp">dictionary</a> using</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;filename.json&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
<p>2D data exported as .json can be loaded into a notebook using <code class="docutils literal notranslate"><span class="pre">data=qcodespp.load_2d_json(filename)</span></code>. This returns a dictionary with the data reshaped correctly.</p>
<p>Limitations in the numpy .dat formatter places limitations on what 1D data can be exported to .dat. Fits will <em>not</em> exported, and combined 1D files cannot be exported unless all arrays are of the same length. These limitations do not exist for .csv and .json.</p>
</section>
<section id="saving-and-loading-appearance-presets">
<h3>Saving and loading appearance presets<a class="headerlink" href="#saving-and-loading-appearance-presets" title="Permalink to this heading"></a></h3>
<p>You can save the current state of the appearance settings from the ‘Presets’ menu.</p>
</section>
<section id="loading-non-qcodes-data">
<h3>Loading non-qcodes++ data.<a class="headerlink" href="#loading-non-qcodes-data" title="Permalink to this heading"></a></h3>
<p>To load data that wasn’t taken by qcodes++, you will need to make sure it has the right shape, and is saved in as a .dat file compatible with <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.genfromtxt.html">numpy genfromtxt</a>. For 1D data, this is a series of columns of equal length. If the data was loaded with rows and columns swapped, e.g. you get 300 columns and 4 rows when you should have 4 columns and 300 rows, set ‘transpose’ to True under ‘Settings for Selected File’. The program will re-import the data and swap the meaning of rows and columns.</p>
<p>For 2D data,data should again be numpy .dat, with the number of columns being the number of parameters. The independent parameters should be in the first and second columns. A basic example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">0</span>   <span class="mf">0.1</span>     <span class="mf">1.2</span>
<span class="mi">0</span>   <span class="mf">0.2</span>     <span class="mf">1.3</span>
<span class="mi">0</span>   <span class="mf">0.3</span>     <span class="mf">1.4</span>
<span class="mi">0</span>   <span class="mf">0.4</span>     <span class="mf">1.5</span>
<span class="mi">0</span>   <span class="mf">0.5</span>     <span class="mf">1.6</span>
<span class="mi">1</span>   <span class="mf">0.1</span>     <span class="mf">1.4</span>
<span class="mi">1</span>   <span class="mf">0.2</span>     <span class="mf">1.5</span>
<span class="mi">1</span>   <span class="mf">0.3</span>     <span class="mf">1.6</span>
<span class="mi">1</span>   <span class="mf">0.4</span>     <span class="mf">1.7</span>
<span class="mi">1</span>   <span class="mf">0.5</span>     <span class="mf">1.8</span>
<span class="mi">2</span>   <span class="mf">0.1</span>     <span class="mf">1.6</span>
<span class="mi">2</span>   <span class="mf">0.2</span>     <span class="mf">1.7</span>
<span class="mi">2</span>   <span class="mf">0.3</span>     <span class="mf">1.8</span>
<span class="mi">2</span>   <span class="mf">0.4</span>     <span class="mf">1.9</span>
<span class="mi">2</span>   <span class="mf">0.5</span>     <span class="mf">2.0</span>
</pre></div>
</div>
<p>The program knows the data is 2D purely by the fact that the first two values in the first column are identical.</p>
<p>By contrast, the below is interpreted as 1D data since the first two values in the first column are different:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">0.5</span>     <span class="mf">0.1</span>     <span class="mf">1.2</span>
<span class="mf">0.45</span>    <span class="mf">0.2</span>     <span class="mf">1.3</span>
<span class="mf">0.4</span>     <span class="mf">0.3</span>     <span class="mf">1.4</span>
<span class="mf">0.35</span>    <span class="mf">0.4</span>     <span class="mf">1.5</span>
<span class="mf">0.3</span>     <span class="mf">0.5</span>     <span class="mf">1.6</span>
<span class="mf">0.25</span>    <span class="mf">0.1</span>     <span class="mf">1.4</span>
<span class="mf">0.2</span>     <span class="mf">0.2</span>     <span class="mf">1.5</span>
<span class="mf">0.15</span>    <span class="mf">0.3</span>     <span class="mf">1.6</span>
<span class="mf">0.1</span>     <span class="mf">0.4</span>     <span class="mf">1.7</span>
</pre></div>
</div>
<p>To automatically name the columns, you can use a numpy header, i.e. start the first line with ‘#’ and list the parameters:</p>
<p><code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">Voltage</span> <span class="pre">Temperature</span> <span class="pre">Conductance</span></code></p>
<p>The default delimiter is any white space. If necessary, specify the delimiter under ‘Settings for Selected File’ to reload the data with the appropriate delimiter.</p>
</section>
</section>
<section id="background">
<h2>Background<a class="headerlink" href="#background" title="Permalink to this heading"></a></h2>
<p>The offline plotting interface was largely developed by Joeri de Bruijckere with the excellent name InSpectra Gadget (because it excels at visualising bias spectroscopy data). Matplotlib is used as the backend, in contrast to live plotting, which is based on pyqtgraph. As such, offline plotting is more powerful, with many built-in functions like peak fitting and taking numerical derivatives of two-dimensional datasets. However, since matplotlib is powerful, it is also big and bulky, and doesn’t track data well; hence using pyqtgraph for live plotting. Both plotting methods have the downside that they only accept rectangular arrays as data. For more complex dataset, you need to write your own code, or reshape the data. The offline plotting module might even crash if it gets data that it does not like. In general there are more bugs in the offline plotting, since it is more complicated/powerful, but we are always working to resolve them.</p>
</section>
<section id="a-note-about-fitting">
<h2>A note about fitting<a class="headerlink" href="#a-note-about-fitting" title="Permalink to this heading"></a></h2>
<p>Fitting real data to the ideal of an analytical expression is fraught with danger. Curve fitting works by minimising the difference between the values in the real data, and the values produced by an analytical equation. For functions with many parameters, there can be many points in the parameter space where a good fit can be made. That is, local minima exist and can potentially be found by the sitting software, meaning <em>the fit may return non-physical values</em>. This is especially true to the least-squares method of fitting, which is used by lmfit (and this software) by default. This is why providing a good, physical initial guess is very important; it increases the chance of finding the ‘right’ local minima. For simple analytical functions it’s usually reasonably obvious what the parameters might be. Therefore, if you don’t provide an initial guess, an initial guess is provided either by the built-in lmfit estimates or by estimates that I (Damon) made up. Usually they’re pretty good guesses but <em>do not trust them</em>. You must check to see if the fitted values are sensible and adjust the initial guesses if not.</p>
<p>Finally, and very importantly!!: The ability to <em>constrain</em> fit parameters is (currently) unavailable in this software, but can be extremely important in fits with lots of parameters. If you have more than 5 fit parameters, I strongly suggest you do NOT use this software to fit your data. Fitting such complicated data is non-trivial, and you should really spend the time to carefully construct a custom fitting procedure using lmfit, sherpa or miniut.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="data_analysis.html" class="btn btn-neutral float-left" title="Data loading and analysis" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="measure.html" class="btn btn-neutral float-right" title="The Measure class" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, qcodes++.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>